<?php 
	$route = Route::getCurrentRoute()->getPath(); 
	$version = 0;
	$path = 'skills-map';
	
	if($route == 'admin/skills-map-v7/update') {
		$version = 7;
		$path = 'skills-map-v7';
	} else if($route == 'admin/skills-map/update') {
		$version = 8;
	}
?>
<a href="<?php echo URL::to('admin/skills-map'); ?>" class="btn" title="Back to List"><i class="icon-arrow-left"></i></a>
<!--<a href="<?php echo URL::to('admin/skills-map-v7'); ?>" class="btn" title="Back to List"><i class="icon-arrow-left"></i></a>	-->
<a href="#" type="button" class="btn" onclick="captureCurrentDiv();"><i class="icon-large icon-print"></i></a>
<?php if( $errors->all() ): ?>
<div class="alert alert-error">
   <button class="close" data-dismiss="alert" type="button">&times;</button>
   <?php echo HTML::ul($errors->all()); ?>

</div>
<?php endif; ?>
<style>
   .pad-top {
   margin-top: 4px;
   }

   input[readonly] {
        cursor: none;
   }

   .check {
      background: url(<?php echo asset('resources/img/check.PNG'); ?>) no-repeat 0px 0px;
      padding: 2px 0 7px 34px;
      border: 0; 
   }

   .uncheck {
      background: url(<?php echo asset('resources/img/uncheck.PNG'); ?>) no-repeat 0px 0px;
      padding: 2px 0 6px 33px;
      border: 0;
   }

   #name h1 {
    font-size: 22px;
    font-weight: bold;
    line-height: 24px;
    color: #000;
   }

   p.title {
       font-size: 18px;
       font-weight: normal;
       line-height: 22px;
       color: #434649;
       color: #666;
   }

   td.fu-td {
    text-align: center;
    padding: 10px 5px;
    border: 1px solid #ccc;
  }

   th.rotate {
           /* Something you can count on */
           height: 140px;
           white-space: nowrap;
   }

   th.rotate > div {
     transform: 
       /* Magic Numbers */
       translate(25px, 51px)
       /* 45 is really 360 - 45 */
       rotate(295deg);
     width: 30px;
   }
   th.rotate > div > span {
     border-bottom: 1px solid #ccc;
     padding: 5px 10px;
   }

   th.row-header {
    padding: 0 10px;
    border-bottom: 1px solid #ccc;
  }

   .csstransforms & th.rotate {
     height: 140px;
     white-space: nowrap;
   }
</style>
<?php $url_path = 'admin/'.$path.'/'.'updateData'; ?>
<?php echo Form::model($skills, array('url'=>$url_path, 'class'=>'form-horizontal', 'id'=>'form-skills', 'role'=>'form', 'method' => 'post')); ?>

<div class="rows">
   <div class="row" style="color: #1f49aa;">
      <div class="span12">
         <table cellpadding="15">    
            <tr style="background: #FFF;">
               <td width="10%">
                  <?php
                     $pic = 'no-photo.jpg';
                     $destinationPath = Config::get('app.url_storage') . '/profile_pic/'.$pic;
					 
					         $version_img = 'resources/img/uCI_v'.$version.'_large.jpg';
                   if($version == 8) {
                      $version_img = 'resources/img/uCI_v'.$version.'_large.png';
                   }
                     ?>       
                  <?php if(! empty($skills->profile_pic)): ?>
                  <?php $pic = $skills->profile_pic; ?>
                  <?php $destinationPath = Config::get('app.url_storage') . '/profile_pic/'.$pic; ?>           
                  <?php endif; ?>   
				<div style="text-align: left;">
                  <?php echo HTML::image($destinationPath, 'logo', array('width' => '160', 'title' => 'engineer photo', 'class' => '', 'style' => 'height: 160px !important; border: 1px solid #f2f2f2;')); ?> 
				</div>
               </td>
               <td width="40%">
                  <span id="name"><h1><?php echo $skills->fullname; ?></h1></span>
                  <p class="title" dir="ltr"><?php echo $company[$skills->company]; ?></p>
               </td>
               <td width="50%" align="right">   
				<?php echo HTML::image($version_img, 'uCI version', array('style' => '', 'class' => 'version-photo')); ?>

				<!--
                  <div id="divProgress"></div>
				  <br>
				  <b>Status (%):</b>
					 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					 <?php echo Form::text('status', $skills->status, array('style'=>'width: 15%; color: #1f49aa;')); ?>         
					 <br>
					 <b>Status as of:</b>
					 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					 <?php
						$status_as = $skills->status_as_of;
						if($skills->status_as_of == '0000-00-00') {
						   $status_as = '';
						}
					 ?>
					 <input type="text" name="status_as_of" style="color: #1f49aa;" value="<?php echo $status_as; ?>" class="date">
					 <script>
						$('.date').datepicker({
						  format: 'yyyy-mm-dd'
						});
					 </script>
				-->
               </td>
            </tr>
         </table>                        
      </div>
      <center>	  
      <h3><u><font color="#00649a">Altitude uCI <?php echo $version; ?> Skills Map</font></u></h3>
   </center>
      <div class="span12" style="padding: 5px 0; color: #fff; background: #00649a; margin-top: 6px;">
         <center>
            <font size="3">Core Skills</font>
			<span style="float: right; margin: -17px 7px 0 0;">
			<?php echo $colored_circle_cs; ?>

			</span>
         </center>
      </div>
      <div class="span12">
         <table class="table table-striped table-bordered">
            <thead>
               <tr align="center">
                  <th> Infrastructure</th>
                  <th> Pacing Mode</th>
                  <th> Channels</th>
                  <th> Development</th>
                  <th> Installation / Patch Upgrade</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <!-- start Infrastructure -->
                  <td>
                     <?php $core_rate = array(); ?>
                     <?php echo HTML::image('resources/img/skills-map/infrastructure/vbox.png', 'logo', array('width' => '55', 'height' => '27', 'class' => 'img-responsive')); ?>

                     <?php
                        $core_rate[$skills->vbox][][$skills->vbox_rate] = HTML::image('resources/img/skills-map/infrastructure/vbox.jpg', 'logo', array('width' => '55', 'height' => '27', 'class' => 'img-responsive'));
                        ?>
                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   
                     <i class="<?php if($skills->vbox != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>
					 <!--
						 USE THIS IF YOU WILL PUT LINE GRAPH ON TEXT
						 <span class="<?php if($skills->vbox != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></span>
					 -->
                     <?php echo dropDown('vbox', $skills->vbox); ?>

                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/infrastructure/alcatel.png', 'logo', array('width' => '96', 'height' => '27', 'class' => 'img-responsive')); ?>

                        <?php
                           $core_rate[$skills->alcatel][][$skills->alcatel_rate] = HTML::image('resources/img/skills-map/infrastructure/alcatel.jpg', 'logo', array('width' => '96', 'height' => '27', 'class' => 'img-responsive'));
                           ?>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->alcatel != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('alcatel', $skills->alcatel); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/infrastructure/avaya.png', 'logo', array('width' => '53', 'height' => '17', 'class' => 'img-responsive')); ?>

                        <?php
                           $core_rate[$skills->avaya][][$skills->avaya_rate] = HTML::image('resources/img/skills-map/infrastructure/avaya.jpg', 'logo', array('width' => '53', 'height' => '17', 'class' => 'img-responsive'));
                           ?>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->avaya != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('avaya', $skills->avaya); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/infrastructure/cisco.png', 'logo', array('width' => '49', 'height' => '20', 'class' => 'img-responsive')); ?>

                        <?php
                           $core_rate[$skills->cisco][][$skills->cisco_rate] = HTML::image('resources/img/skills-map/infrastructure/cisco.png', 'logo', array('width' => '49', 'height' => '20', 'class' => 'img-responsive'));
                           ?>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->cisco != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                      
                        <?php echo dropDown('cisco', $skills->cisco); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/infrastructure/sql.png', 'logo', array('width' => '80', 'height' => '23', 'class' => 'img-responsive')); ?>

                        <?php
                           $core_rate[$skills->sql_server][][$skills->sql_rate] = HTML::image('resources/img/skills-map/infrastructure/sql.png', 'logo', array('width' => '80', 'height' => '23', 'class' => 'img-responsive'));
                           ?>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->sql_server != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('sql_server', $skills->sql_server); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/infrastructure/oracle.jpg', 'logo', array('width' => '83', 'height' => '19', 'class' => 'img-responsive')); ?>

                        <?php
                           $core_rate[$skills->oracle][][$skills->oracle_rate] = HTML::image('resources/img/skills-map/infrastructure/oracle.jpg', 'logo', array('width' => '83', 'height' => '19', 'class' => 'img-responsive'));
                           ?>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->oracle != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>
                        <?php echo dropDown('oracle', $skills->oracle); ?>

                     </div>
                  </td>
                  <!-- end Infrastructure -->
                  <!-- start Pacing Mode -->
                  <td>
                     <?php echo HTML::image('resources/img/skills-map/pacing/altitude_routing.png', 'logo', array('width' => '104', 'height' => '28', 'class' => 'img-responsive')); ?>

                     &nbsp;&nbsp;&nbsp;&nbsp;
                     <i class="<?php if($skills->altitude_routing != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                     
                     <?php echo dropDown('altitude_routing', $skills->altitude_routing); ?>

                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/pacing/altitude_dialer.png', 'logo', array('width' => '89', 'height' => '24', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_dialer != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_dialer', $skills->altitude_dialer); ?>

                     </div>
                  </td>
                  <!-- end Pacing Mode -->
                  <!-- start Channels -->
                  <td>
                     <?php echo HTML::image('resources/img/skills-map/channels/altitude_voice.png', 'logo', array('width' => '75', 'height' => '25', 'class' => 'img-responsive')); ?>

                     &nbsp;&nbsp;&nbsp;
                     <i class="<?php if($skills->altitude_voice != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>
                     <?php echo dropDown('altitude_voice', $skills->altitude_voice); ?>

                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/channels/altitude_email.png', 'logo', array('width' => '67', 'height' => '21', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_email != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_email', $skills->altitude_email); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/channels/altitude_chat.png', 'logo', array('width' => '62', 'height' => '24', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_chat != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_chat', $skills->altitude_chat); ?>

                     </div>
                     <div class="pad-top" <?php if($version == 7): ?> style="display: none;" <?php endif; ?>>                        
                        <?php echo HTML::image('resources/img/skills-map/channels/social.PNG', 'logo', array('width' => '50', 'height' => '23', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->social != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('social', $skills->social); ?>

                     </div>
                  </td>
                  <!-- end Channels -->
                  <!-- start Development -->
                  <td>
                     <?php echo HTML::image('resources/img/skills-map/development/altitude_desktop.png', 'logo', array('width' => '87', 'height' => '23', 'class' => 'img-responsive')); ?>

                     &nbsp;&nbsp;&nbsp;
                     <i class="<?php if($skills->altitude_desktop != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                     
                     <?php echo dropDown('altitude_desktop', $skills->altitude_desktop); ?>

                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/development/altitude_ivr.png', 'logo', array('width' => '84', 'height' => '24', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_ivr != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_ivr', $skills->altitude_ivr); ?>

                     </div>
                     <div class="pad-top" <?php if($version == 7): ?> style="display: none;" <?php endif; ?>>                        
                        <?php echo HTML::image('resources/img/skills-map/development/altitude_express_routing.png', 'logo', array('width' => '83', 'height' => '28', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_express_routing != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_express_routing', $skills->altitude_express_routing); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/development/altitude_integration.png', 'logo', array('width' => '67', 'height' => '24', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_integration != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_integration', $skills->altitude_integration); ?>

                     </div>
                     <div class="pad-top" <?php if($version == 7): ?> style="display: none;" <?php endif; ?>>                        
                        <?php echo HTML::image('resources/img/skills-map/development/altitude_workflow.png', 'logo', array('width' => '56', 'height' => '25', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->altitude_workflow != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('altitude_workflow', $skills->altitude_workflow); ?>

                     </div>
                  </td>
                  <!-- end Development -->
                  <!-- start Installation / Patch Updgrade -->
                  <td>
                     <?php echo HTML::image('resources/img/skills-map/installation/uci_installation.png', 'logo', array('width' => '104', 'height' => '28', 'class' => 'img-responsive')); ?>

                     &nbsp;&nbsp;&nbsp;&nbsp;
                     <i class="<?php if($skills->uci_installation != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                     
                     <?php echo dropDown('uci_installation', $skills->uci_installation); ?>

                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/installation/uci_patch.PNG', 'logo', array('width' => '89', 'height' => '24', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->uci_patch != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('uci_patch', $skills->uci_patch); ?>

                     </div>
                  </td>
                  <!-- end Installation / Patch Updgrade -->                        
               </tr>
            </tbody>
         </table>
      </div>
      <div class="span6">
         <div style="text-align: center; padding: 5px 0; color: #fff; background: #00649a;">
            <font size="3">Advanced Skills</font>
         </div>
         <table class="table table-striped table-bordered">
            <thead>
               <tr align="center">
                  <th> Third Party / Connectors</th>
                  <th> Training</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>
                     <?php echo HTML::image('resources/img/skills-map/connectors/sap.png', 'logo', array('width' => '48', 'height' => '24', 'class' => 'img-responsive')); ?>

                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     
                     <i class="<?php if($skills->sap != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>
                     <?php echo dropDown('sap', $skills->sap); ?>

                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/connectors/siebel.png', 'logo', array('width' => '77', 'height' => '19', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->siebel != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('siebel', $skills->siebel); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/connectors/ms_crm.png', 'logo', array('width' => '120', 'height' => '25', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;
                        <i class="<?php if($skills->ms_crm != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('ms_crm', $skills->ms_crm); ?>

                     </div>
                     <div class="pad-top">                        
                        <?php echo HTML::image('resources/img/skills-map/connectors/teleopti.png', 'logo', array('width' => '64', 'height' => '22', 'class' => 'img-responsive')); ?>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->teleopti != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('teleopti', $skills->teleopti); ?>

                     </div>                     
                  </td>
                  <td>
                     Supervisor
                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                     <i class="<?php if($skills->supervisor != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                     
                     <?php echo dropDown('supervisor', $skills->supervisor); ?>

                     <div class="pad-top">                        
                        Administrator
                        &nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->administrator != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('administrator', $skills->administrator); ?>

                     </div>
                     <div class="pad-top">                        
                        Developer
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <i class="<?php if($skills->developer != '0'): ?> check <?php else: ?> uncheck <?php endif; ?>"></i>                        
                        <?php echo dropDown('developer', $skills->developer); ?>

                     </div>
                  </td>
               </tr>
            </tbody>
         </table>
      </div>
      <div class="span6">
         <div style="text-align: center; padding: 5px 0; color: #fff; background: #00649a;">
            <font size="3">Voice of the Customers</font>
			<span style="float: right; margin: -17px 7px 0 0;">
				<?php echo $colored_circle_ce; ?>

			</span>
         </div>
         <table class="table table-striped table-bordered">
			<thead>
               <tr align="center">
                  <th colspan="2"> <a href="#viewFeedbacksModal" data-toggle="modal">No. of Feedbacks ( <?php echo $no_of_feedbacks; ?> )</a> <span style="float: right;"><a href="#feedbackModal" data-toggle="modal"><i class="icon-large icon-plus"></i></a></span></th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>
                     <?php                    
                        $communication_avg = number_format($votc_average->communication_avg, 2);
                        $commitment_avg = number_format($votc_average->commitment_avg, 2);
                        $analysis_avg = number_format($votc_average->analysis_avg, 2);
                        $delivery_avg = number_format($votc_average->delivery_avg, 2);
                        $productivity_avg = number_format($votc_average->productivity_avg, 2);
                        $fixing_avg = number_format($votc_average->fixing_avg, 2);
                        $presentability_avg = number_format($votc_average->presentability_avg, 2);
                        $recommendation_avg = number_format($votc_average->recommendation_avg, 2);
                     ?>
                     Communication
                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     
                        <b><?php echo $communication_avg; ?></b>
                     <div class="pad-top">                        
                        Commitment
                        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;                        
                        <b><?php echo $commitment_avg; ?></b>
                     </div>
                     <div class="pad-top">                        
                        Analysis
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        
                        <b><?php echo $analysis_avg; ?></b>
                     </div>
                     <div class="pad-top">                        
                        Quality of Delivery
                        &nbsp;&nbsp;                                                
                        <b><?php echo $delivery_avg; ?></b>
                     </div>
                  </td>
                  <td>
                     Productivity
                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     
                     <b><?php echo $productivity_avg; ?></b>
                     <div class="pad-top">                        
                        Issues Fixing Quality
                        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;                        
                        <b><?php echo $fixing_avg; ?></b>
                     </div>
                     <div class="pad-top">                        
                        Company Presentability
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        
                        <b><?php echo $presentability_avg; ?></b>
                     </div>
                     <div class="pad-top">                        
                        Overall Recommendation
                        &nbsp;&nbsp;&nbsp;                        
                        <b><?php echo $recommendation_avg; ?></b>                      
                     </div>
                  </td>
               </tr>
            </tbody>
         </table>
      </div>
      <div style="clear: both;"></div>
      <div class="span6">
         <div style="text-align: center; padding: 5px 0; color: #fff; background: #00649a;">
            <font size="3"><a href="" id="a-legend" style="color: #fff;">Individual Grades <i id="zoom" class="icon-plus-sign"></i></a></font>
         </div>
         <div id="div-legend" style="display: none; padding: 5px; height: 177px; background: #FFF; overflow-y: auto;">
            <strong>INFRASTRUCTURE</strong>            
            <ul>
            <li>Altitude vBox - <?php echo $skills->vbox; ?> </li>
            <li>Alcatel Lucent - <?php echo $skills->alcatel; ?> </li>
            <li>AVAYA - <?php echo $skills->avaya; ?> </li>
            <li>CISCO - <?php echo $skills->cisco; ?> </li>
            <li>SQL Server - <?php echo $skills->sql_server; ?> </li>
            <li>ORACLE - <?php echo $skills->oracle; ?> </li>
            </ul>
            <strong>PACING MODE</strong>
            <ul>
            <li>altitude unified routing - <?php echo $skills->altitude_routing; ?> </li>
            <li>altitude unified dialer - <?php echo $skills->altitude_dialer; ?> </li>            
            </ul>
            <strong>CHANNELS</strong>
            <ul>
            <li>altitude voice - <?php echo $skills->altitude_voice; ?> </li>
            <li>altitude email - <?php echo $skills->altitude_email; ?> </li>
            <li>altitude chat - <?php echo $skills->altitude_chat; ?> </li>
            <li <?php if($version == 7): ?> style="display: none;" <?php endif; ?>>social media - <?php echo $skills->social; ?> </li>
            </ul>
            <strong>DEVELOPMENT</strong>
            <ul>
            <li>altitude unified desktop - <?php echo $skills->altitude_desktop; ?> </li>
            <li>altitude IVR - <?php echo $skills->altitude_ivr; ?> </li>
            <li <?php if($version == 7): ?> style="display: none;" <?php endif; ?>>altitude express routing - <?php echo $skills->altitude_express_routing; ?> </li>
            <li>altitude integration - <?php echo $skills->altitude_integration; ?> </li>
            <li <?php if($version == 7): ?> style="display: none;" <?php endif; ?>>altitude workflow - <?php echo $skills->altitude_workflow; ?> </li>
            </ul>
            <strong>INSTALLATION / PATCH UPGRADE</strong>
            <ul>
            <li>Altitude uCI 8 New Installation - <?php echo $skills->uci_installation; ?> </li>
            <li>Altitude uCI 8 Patch update - <?php echo $skills->uci_patch; ?> </li>
            </ul>
            <strong>THIRD PARTY / CONNECTORS</strong>
            <ul>
            <li>SAP - <?php echo $skills->sap; ?> </li>
            <li>SIEBEL - <?php echo $skills->siebel; ?> </li>
            <li>Microsoft Dynamics CRM - <?php echo $skills->ms_crm; ?> </li>
            <li>TELEOPTI - <?php echo $skills->teleopti; ?> </li>
            </ul>
            <strong>TRAINING</strong>
            <ul>
            <li>Supervisor - <?php echo $skills->supervisor; ?> </li>
            <li>Administrator - <?php echo $skills->administrator; ?> </li>            
            <li>Developer - <?php echo $skills->developer; ?> </li>
            </ul>
            <strong>CUSTOMER EXPERIENCE</strong>
            <ul>
            <li>Communication - <?php echo $skills->communication; ?> </li>
            <li>Commitment - <?php echo $skills->commitment; ?> </li> 
            <li>Analysis - <?php echo $skills->analysis; ?> </li>  
            <li>Quality of Delivery - <?php echo $skills->quality_of_delivery; ?> </li>  
            <li>Productivity - <?php echo $skills->productivity; ?> </li>  
            <li>Issues Fixing Quality - <?php echo $skills->fixing; ?> </li>  
            <li>Company Presentability - <?php echo $skills->presentability; ?> </li>             
            <li>Overall Recommendation - <?php echo $skills->recommendation; ?> </li>
            </ul>
         </div>
      </div>
      <div class="span6">
         <div style="text-align: center; padding: 5px 0; color: #fff; background: #00649a;">
            <font size="3"><a href="" id="a-history" style="color: #fff;">History of Updates <i id="zoom-history" class="icon-plus-sign"></i></a></font>
         </div>
         <div id="div-history" style="display: none; padding: 5px; height: 177px; background: #FFF; overflow-y: auto;">
            <?php
               $history = array();
               //date('m d Y', strtotime($announcement->date_from))
               //INFRASTRUCTURE
               $history[$skill_history->vbox_date][] = 'Altitude vBox was updated to '. $skills->vbox.' by '.$skill_history->vbox_by;
               $history[$skill_history->alcatel_date][] = 'Alcatel Lucent was updated to '. $skills->alcatel.' by '.$skill_history->alcatel_by;
               $history[$skill_history->avaya_date][] = 'AVAYA was updated to '. $skills->avaya.' by '.$skill_history->avaya_by;
               $history[$skill_history->cisco_date][] = 'CISCO was updated to '. $skills->cisco.' by '.$skill_history->cisco_by;
               $history[$skill_history->sql_date][] = 'SQL Server was updated to '. $skills->sql_server.' by '.$skill_history->sql_server_by;
               $history[$skill_history->oracle_date][] = 'ORACLE was updated to '. $skills->oracle.' by '.$skill_history->oracle_by;
               
               //PACING MODE
               $history[$skill_history->altitude_routing_date][] = 'altitude unified routing was updated to '.$skills->altitude_routing.' by '.$skill_history->altitude_routing_by;
               $history[$skill_history->altitude_dialer_date][] = 'altitude unified dialer was updated to '.$skills->altitude_dialer.' by '.$skill_history->altitude_dialer_by;

               //CHANNELS
               $history[$skill_history->altitude_voice_date][] = 'altitude voice was updated to '.$skills->altitude_voice.' by  '.$skill_history->altitude_voice_by;
               $history[$skill_history->altitude_email_date][] = 'altitude email was updated to '.$skills->altitude_email.' by '.$skill_history->altitude_email_by;
               $history[$skill_history->altitude_chat_date][] = 'altitude chat was updated to '.$skills->altitude_chat.' by '.$skill_history->altitude_chat_by;
               $history[$skill_history->social_date][] = 'social media was updated to '.$skills->social.' by '.$skill_history->social_by;

               //DEVELOPMENT
               $history[$skill_history->altitude_desktop_date][] = 'altitude unified desktop was updated to '.$skills->altitude_desktop.' by '.$skill_history->altitude_desktop_by;
               $history[$skill_history->altitude_ivr_date][] = 'altitude IVR was updated to '.$skills->altitude_ivr.' by '.$skill_history->altitude_ivr_by;
               $history[$skill_history->altitude_express_routing_date][] = 'altitude express routing was updated to '.$skill_history->altitude_express_routing_by;
               $history[$skill_history->altitude_integration_date][] = 'altitude integration was updated to '.$skills->altitude_integration.' by '.$skill_history->altitude_integration_by;
               $history[$skill_history->altitude_workflow_date][] = 'altitude workflow was updated to '.$skills->altitude_workflow.' by '.$skill_history->altitude_workflow_by;

               //INSTALLATION / PATCH UPGRADE
               $history[$skill_history->uci_installation_date][] = 'Altitude uCI 8 New Installation was updated to '. $skills->uci_installation .' by '. $skill_history->uci_installation_by;
               $history[$skill_history->uci_patch_date][] = 'Altitude uCI 8 Patch update was updated to '. $skills->uci_patch .' by '. $skill_history->uci_patch_by;

               //THIRD PARTY / CONNECTORS
               $history[$skill_history->sap_date][] = 'SAP was updated to '. $skills->sap .' by '. $skill_history->sap_by;
               $history[$skill_history->siebel_date][] = 'SIEBEL was updated to '.$skills->siebel .' by '. $skill_history->siebel_by;
               $history[$skill_history->ms_crm_date][] = 'Microsoft Dynamics CRM was updated to '. $skills->ms_crm .' by '. $skill_history->ms_crm_by;
               $history[$skill_history->teleopti_date][] = 'TELEOPTI was updated to '. $skills->teleopti .' by '. $skill_history->teleopti_by;

               //TRAINING
               $history[$skill_history->supervisor_date][] = 'Supervisor was updated to '. $skills->supervisor .' by '. $skill_history->supervisor_by;
               $history[$skill_history->administrator_date][] = 'Administrator was updated to '. $skills->administrator .' by '. $skill_history->administrator_by;
               $history[$skill_history->developer_date][] = 'Developer was updated to '. $skills->developer .' by '. $skill_history->developer_by;

               /*
               //CUSTOMER EXPERIENCE
               $history[$skill_history->communication_date][] = 'Communication was updated to '. $skills->communication .' by '. $skill_history->communication_by;
               $history[$skill_history->commitment_date][] = 'Commitment was updated to '. $skills->commitment .' by '. $skill_history->commitment_by; 
               $history[$skill_history->analysis_date][] = 'Analysis was updated to '. $skills->analysis .' by '. $skill_history->analysis_by;  
               $history[$skill_history->quality_of_delivery_date][] = 'Quality of Delivery was updated to '. $skills->quality_of_delivery .' by '. $skill_history->quality_of_delivery_by; 
               $history[$skill_history->productivity_date][] = 'Productivity was updated to '. $skills->productivity .' by '. $skill_history->productivity_by; 
               $history[$skill_history->fixing_date][] = 'Issues Fixing Quality was updated to '. $skills->fixing .' by '. $skill_history->fixing_by;  
               $history[$skill_history->presentability_date][] = 'Company Presentability was updated to '. $skills->presentability .' by '. $skill_history->presentability_by;
               $history[$skill_history->recommendation_date][] = 'Overall Recommendation was updated to '. $skills->recommendation .' by '. $skill_history->recommendation_by;

               $history[$skill_history->status_update][] = 'Status % was updated to '. $skills->status .' by '. $skill_history->status_by;
               $history[$skill_history->status_as_of_date][] = 'Status as of was updated to '. date('m/d/Y', strtotime($skills->status_as_of)) .' by '. $skill_history->status_as_of_by;
               */
               krsort($history);   
             
               foreach($history as $key_history => $history_value):
                  $skill_histories = str_replace(':', '-',str_replace(' ', '', $key_history));                  
                  if($key_history != '0000-00-00 00:00:00') {
                        echo '<i class="icon-plus" id="i-'.$skill_histories.'"></i> <a href="#" id="'.$skill_histories.'" class="history-date" title="click me">'.date('M d, Y H:i:s', strtotime($key_history)).'</a><br>';
                     foreach($history_value as $history_values):
                        echo '<div class="'.$skill_histories.'" style="margin-left: 12px; display: none;"><i class="icon-check"></i> '.$history_values.'</div>';
                     endforeach; 
                  }
               endforeach;      
            ?>
         </div>
      </div>
      <div class="span12" style="text-align: center; padding: 5px 0;">
         <?php echo Form::hidden('skill_id', $skills->id ); ?>

         <?php echo Form::hidden('id', $_GET['id'] ); ?>

         <input type="submit" class="btn btn-primary" id="submitForm" style="background: #2c6b00;" value="UPDATE SKILLS MAP">
         <a href="" class="btn" style="background: #999999;">REVERT CHANGES</a>                  
      </div>
      <?php
         ksort($core_rate); 
         unset($core_rate[0]); 
         ?>      
      <?php
         #echo '<pre>';     
         #print_r($core_rate);
         ?>
      <script>      
		var val = '<?php echo $skills->status; ?>';
		var pcolor;
		
		if(val > 0 && val < 100) {
			pcolor = '#ff671c';
		} else if(val == 100) {
			pcolor = '#30CD74';
		}			
		/*
		UNCOMMENT TO SHOW PIE CHART
         $("#divProgress").circularloader({
            progressPercent: <?php echo $skills->status; ?> ,
            progressBarColor: pcolor, 
            progressBarBackground: "#CDCDCD",                
            fontSize: "24px",
            progressBarWidth: 17,
            radius: 55
         });
         */
         $("#a-legend").toggle(function() {
             $('#zoom').attr('class', 'icon-minus-sign');
             $("#div-legend").show();
           }, function() {
             $('#zoom').attr('class', 'icon-plus-sign');
             $("#div-legend").hide();
        });

         $("#a-history").toggle(function() {
             $('#zoom-history').attr('class', 'icon-minus-sign');
             $("#div-history").show();
           }, function() {
             $('#zoom-history').attr('class', 'icon-plus-sign');
             $("#div-history").hide();
        });
      </script>           
   </div>
</div>
<div class="row">
   <div class="span12">
     <table class="table table-striped">
         <tr>
            <td>
               <div id="container-core" style="min-width: 570px; max-width: 650px; height: 400px; margin: 0 auto"></div>
            </td>
            <td align="right">
               <div id="container" style="min-width: 570px; max-width: 650px; height: 400px; margin: 0 auto"></div>
            </td>
         </tr>
         <tr>
            <td colspan="2">            
               <div id="container-experience" style="min-width: 570px; max-width: 650px; height: 400px; margin: 0 auto"></div>   
            </td>
         </tr>
            <tr>
               <table>       
                  <tr><th align="left" colspan="2">Grades Definition</th></tr>
                  <tr align="left" >
                     <td>1:</td>
                     <td>Has very little practical exposure to the subject. But no hands-on experience.</td>
                  </tr>
                  <tr align="left" >
                     <td>2:</td>
                     <td>Has hands-on experience on the subject but still need to be attended by an expert to do the job.</td>
                  </tr>
                  <tr align="left" >
                     <td>3:</td>
                     <td>Can autonomously do the job but may need remote help from an expert.</td>
                  </tr>
                  <tr align="left" >
                     <td>4:</td>
                     <td>Can do the job fully autonomous.</td>
                  </tr>
                  <tr align="left" >
                     <td>5:</td>
                     <td>Can guide, help and train others to achieve a job.</td>
                  </tr>        
               </table>
            </td>         
         </tr>
     </table> 
   <?php echo Form::close(); ?>  
   </div>
</div>
<div id="feedbackModal" style="overflow-y: auto;"  class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3 id="myModalLabel">Feedbacks</h3>
	</div>
	<div class="modal-body">
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<?php echo HTML::script('resources/js/ddslick.js'); ?>			
		<?php echo Form::open(array('url'=>'admin/'.$path.'/add-feedback', 'class'=>'form-horizontal', 'autocomplete'=>'off', 'id'=>'form-feedback', 'role'=>'form', 'method' => 'post')); ?>

			<table style="color: #1f49aa; font-size: 13px;" >
			<tr>
				<td>Customer:</td>
				<td>
				<br>
					<div id="myDropdown"></div>
					<br>
					<input type="hidden" name="cust_id_feedback" id="cust_id_feedback" value="">
					<?php echo Form::hidden('uid', $_GET['id'] ); ?>

					<script>
						var ddData = [
							<?php foreach($customers as $cust): ?>						
								<?php 
									$cust_photo = $cust->logo;
									if($cust->logo == '') {
										$cust_photo = 'no-photo.jpg';
									}
								?>
								{
									text: "<?php echo $cust->company; ?>",
									value: <?php echo $cust->id; ?>,
									selected: false,
									//description: "Description with Facebook",
									imageSrc: "<?php echo Config::get('app.url_storage') . '/company_logo/'.$cust_photo; ?>"
								},
							<?php endforeach; ?>
							
						];
						
						$('#myDropdown').ddslick({
							data:ddData,
							width:448,
							selectText: "Select your preferred customer",
							imagePosition:"left",
							onSelected: function(selectedData){
								for(var i in selectedData) {
									if(selectedData[i].value != undefined) {
										var cust_id = selectedData[i].value;
										$('#cust_id_feedback').val(cust_id);
									}
								}							
							}   
						});
					</script>
				</td>
				<td>&nbsp;</td>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td colspan="4">
					<table class="tables" width="100%" cellpadding="3">
						<tr>
							<td>
                        Communication
                        &nbsp;&nbsp;&nbsp;
                        <input type="number" min="0" max="5" value="0" name="f_communication" style="width: 15%;">
                     </td>
							<td align="right">
                        Productivity
                        <input type="number" min="0" max="5" value="0" name="f_productivity" style="width: 15%;">
                     </td>
						</tr>
                  <tr>                     
                     <td>
                        Commitment
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="number" min="0" max="5" value="0" name="f_commitment" style="width: 15%;">
                     </td>
                     <td align="right">
                        Issues Fixing Quality
                        <input type="number" min="0" max="5" value="0" name="f_fixing" style="width: 15%;">
                     </td>
                  </tr>                  
						<tr>
							<td>
                        Analysis
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="number" min="0" max="5" value="0" name="f_analysis" style="width: 15%;">
                     </td>							
							<td align="right">
                        Company Presentability
                        <input type="number" min="0" max="5" value="0" name="f_presentability" style="width: 15%;">
                     </td>
						</tr>
						<tr>							
							<td>
                        Quality of Delivery                        
                        <input type="number" min="0" max="5" value="0" name="f_delivery" style="width: 15%;">
                     </td>							
							<td align="right">
                        Overall Recommendation
                        <input type="number" min="0" max="5" value="0" name="f_recommendation" style="width: 15%;">
                     </td>
						</tr>                  
					</table>
				</td>
			</tr>
			<tr>
				<td colspan="4" align="center"><input type="submit" id="submit-feedback" class="btn btn-primary" value="Save"> <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>  </td>
			</tr>			 
			</table>
			<?php echo Form::close(); ?>

		<script>
			$('#submit-feedback').click(function(e) {
				e.preventDefault();
				
				if($('#cust_id_feedback').val() != '') {
					$('#form-feedback').submit();
				} else {
					alert('- Customer field is required.');
				}							
			});
		</script>
	</div>
</div>

<div id="viewFeedbacksModal" style="overflow-y: hidden; width: 850px;"  class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3 id="myModalLabel">Customer Feedback</h3>
	</div>
	<div class="modal-body">
      <?php echo Form::open(array('url'=>'admin/'.$path.'/update-feedback', 'class'=>'form-horizontal', 'autocomplete'=>'off', 'id'=>'form-feedback-update', 'role'=>'form', 'method' => 'post')); ?>

		<table cellpadding="5" class="table-header-rotated">
			<?php if($customer_feedbacks): ?>
			<thead>
         <tr>
				<th>&nbsp;</th>
            <th class="rotate"><div><span>Communication</span></div></th>				
            <th class="rotate"><div><span>Commitment</span></div></th>
            <th class="rotate"><div><span>Analysis</span></div></th>
            <th class="rotate"><div><span>Quality of Delivery</span></div></th>
            <th class="rotate"><div><span>Productivity</span></div></th>
            <th class="rotate"><div><span>Issues Fixing Quality</span></div></th>
            <th class="rotate"><div><span>Company Presentability</span></div></th>
            <th class="rotate"><div><span>Overall Recommendation</span></div></th>
            <th class="rotate"><div><span>Created By</span></div></th>
            <th class="rotate"><div><span>Created At</span></div></th>
            <th class="rotate"></th>
			</tr>
         </thead>
			<?php foreach($customer_feedbacks as $cust_feed): ?>
			<?php 
				$cust_logo = $cust_feed->logo;
				if($cust_feed->logo == '') {
					$cust_logo = 'no-photo.jpg';
				}
				$dest_logo = Config::get('app.url_storage') . '/company_logo/'.$cust_logo;
			?>
         <tbody>
          <tr>
            <th class="row-header">
               <?php echo HTML::image($dest_logo, 'logo', array('width' => '40', 'title' => $cust_feed->company, 'class' => '', 'style' => 'height: 40px !important;')); ?>               
               <font size="1"><?php echo $cust_feed->company; ?></font>
            </th> 
            <input type="hidden" name="id[]" value="<?php echo $cust_feed->id; ?>">
				<td class="fu-td"><input type="number" min="0" max="5" name="fu_communication[]" value="<?php echo $cust_feed->communication; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_commitment[]" value="<?php echo $cust_feed->commitment; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_analysis[]" value="<?php echo $cust_feed->analysis; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_delivery[]" value="<?php echo $cust_feed->delivery; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_productivity[]" value="<?php echo $cust_feed->productivity; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_fixing[]" value="<?php echo $cust_feed->fixing; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_presentability[]" value="<?php echo $cust_feed->presentability; ?>" style="width: 35px;"></td>
            <td class="fu-td"><input type="number" min="0" max="5" name="fu_recommendation[]" value="<?php echo $cust_feed->recommendation; ?>" style="width: 35px;"></td>
            <td class="fu-td"><?php echo $cust_feed->admin; ?></td>
            <td class="fu-td"><?php echo $cust_feed->created_at; ?></td>
            <td class="fu-td"><a href="" class="delete-feedback" data-id="<?php echo $cust_feed->id; ?>"><i class="icon-trash"></i></a></td>
			</tr>
         <?php endforeach; ?>
         <tr>
            <td colspan="13" align="center">
               <input type="submit" id="submit-update-feedback" class="btn btn-primary" value="Update"> <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
            </td>
         </tr>         
         </tbody>
         <?php else: ?>
            <td colspan="2">** Empty Results **</td>
         <?php endif; ?>
		</table>
      <input type="hidden" name="uid" value="<?php echo $_GET['id']; ?>">
      <?php echo Form::close(); ?>

      <script>
         $('.delete-feedback').click(function(e){
            e.preventDefault();
            var id = $(this).attr('data-id');

            if(confirm('Are you sure you want to delete this customer feedback?')) {
               var url = '<?php echo URL::to("admin/".$path."/delete-feedback?uid=".$_GET['id']."&id="); ?>'+id;
               window.location.href = url;
            }
         });
      </script>
	</div>
</div>
<?php
   function dropDown($name, $value) {      
      //<option value="na" '.($value == 'na' ? 'selected' : '').'>na</option>
      $html = '<select name="'.$name.'" style="width: 50px;">         
         <option value="0" '.($value == '0' ? 'selected' : '').'>0</option>
         <option value="1" '.($value == '1' ? 'selected' : '').'>1</option>
         <option value="2" '.($value == '2' ? 'selected' : '').'>2</option>
         <option value="3" '.($value == '3' ? 'selected' : '').'>3</option>
         <option value="4" '.($value == '4' ? 'selected' : '').'>4</option>
         <option value="5" '.($value == '5' ? 'selected' : '').'>5</option>         
      </select>';

      return $html;
   }
   
   function textBox($name, $value) {      
      $html = '<input readonly type="text" style="width: 40px;" size="5" name="'.$name.'" value="'.$value.'">';

      return $html;
   }
?>
<?php echo HTML::script('resources/js/html2canvas.js'); ?>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript"><!--
$(function () {
    $('#container-experience').highcharts({

        chart: {
            polar: true,
            type: 'area'
        },

        title: {
            text: 'Voice of the Customers',
            x: 0
        },

        pane: {
            size: '80%'
        },

        xAxis: {
            categories: ['Communication', 'Commitment', 'Analysis', 'Quality of Delivery', 'Productivity', 'Issues Fixing Quality', 'Company Presentability', 'Overall Recommendation'],
            tickmarkPlacement: 'on',
			   //visible: false,
            lineWidth: 0
        },

        yAxis: {
            gridLineInterpolation: 'polygon',
            lineWidth: 0,
            min: 0,
			categories: [1, 2, 3, 4, 5]
        },

        tooltip: {
            shared: true
            //pointFormat: '<span style="color:{series.color}">{series.name}: <b>${point.y:,.0f}</b><br/>'
        },

        legend: {
            align: 'right',
            verticalAlign: 'top',
            y: 70,
            layout: 'vertical'
        },
        <?php
            $cust_exp = $communication_avg.', '.$commitment_avg.', '.$analysis_avg.', '.$delivery_avg.', '.
            $productivity_avg.', '.$fixing_avg.', '.$presentability_avg.', '.$recommendation_avg;   
         ?>
        series: [
           {
			   showInLegend: false,
               name: 'Voice of the Customers',
               data: [<?php echo $cust_exp; ?>],
               pointPlacement: 'on'
            }
        ]

    });
});

$(function () {
    $('#container').highcharts({

        chart: {
            polar: true,
            type: 'area'
        },

        title: {
            text: 'Advance Skills',
            x: 0
        },

        pane: {
            size: '80%'
        },

        xAxis: {
            categories: ['SAP', 'SIEBEL', 'MS Dynamics CRM', 'TELEOPTI', 'Supervisor', 'Administrator', 'Developer'],
            tickmarkPlacement: 'on',
			   //visible: false,
            lineWidth: 0
        },

        yAxis: {
            gridLineInterpolation: 'polygon',
            lineWidth: 0,
            min: 0,
			categories: [1, 2, 3, 4, 5]
        },

        tooltip: {
            shared: true
            //pointFormat: '<span style="color:{series.color}">{series.name}: <b>${point.y:,.0f}</b><br/>'
        },

        legend: {
            align: 'right',
            verticalAlign: 'top',
            y: 70,
            layout: 'vertical'
        },
        <?php
            $advance_skills = ($skills->sap == 'na' ? 0 : $skills->sap).', '.($skills->siebel == 'na' ? 0 : $skills->siebel).', '.($skills->ms_crm == 'na' ? 0 : $skills->ms_crm).', '.($skills->teleopti == 'na' ? 0 : $skills->teleopti).', '.($skills->supervisor == 'na' ? 0 : $skills->supervisor).', '.($skills->administrator == 'na' ? 0 : $skills->administrator).', '.($skills->developer == 'na' ? 0 : $skills->developer);
            			
			#$advance_skills = $skills->sap.', '.$skills->siebel.', '.$skills->ms_crm.', '.$skills->teleopti.', '.$skills->supervisor.', '.$skills->administrator.', '.$skills->developer;
         ?>
        series: [
           {
			   showInLegend: false,
               name: 'Advance Skills',
               data: [<?php echo $advance_skills; ?>],
               pointPlacement: 'on'
            }
        ]

    });
});

$(function () {
    $('#container-core').highcharts({

        chart: {
            polar: true,
            type: 'area'
        },

        title: {
            text: 'Core Skills',
            x: 0
        },

        pane: {
            size: '80%'
        },

        xAxis: {
            categories: ['altitude vBox', 'Alcatel-Lucent', 'AVAYA', 'CISCO', 'SQL Server', 'ORACLE', 'altitude unified routing', 'altitude unified dialer', 'altitude voice', 'altitude email', 'altitude chat', 'social media', 'altitude unified desktop', 'altitude ivr', 'altitude express routing', 'altitude integration', 'altitude workflow', 'altitude uCI New Installation', 'altitude uCI Patch update'],
            tickmarkPlacement: 'on',
			   //visible: false,
            lineWidth: 0
        },

        yAxis: {
            gridLineInterpolation: 'polygon',
            lineWidth: 0,
            min: 0,
			categories: [1, 2, 3, 4, 5]
        },

        tooltip: {
            shared: true
            //pointFormat: '<span style="color:{series.color}">{series.name}: <b>${point.y:,.0f}</b><br/>'
        },

        legend: {
            align: 'right',
            verticalAlign: 'top',
            y: 70,
            layout: 'vertical'
        },
        <?php            
            $core_skills = ($skills->vbox == 'na' ? 0 : $skills->vbox).', '.($skills->alcatel == 'na' ? 0 : $skills->alcatel).', '.($skills->avaya == 'na' ? 0 : $skills->avaya).', '.($skills->cisco == 'na' ? 0 : $skills->cisco).', '.($skills->sql_server == 'na' ? 0 : $skills->sql_server).', '.($skills->oracle == 'na' ? 0 : $skills->oracle);
            $core_skills .= ', '.($skills->altitude_routing == 'na' ? 0 : $skills->altitude_routing).', '.($skills->altitude_dialer == 'na' ? 0 : $skills->altitude_dialer);
            $core_skills .= ', '.($skills->altitude_voice == 'na' ? 0 : $skills->altitude_voice).', '.($skills->altitude_email == 'na' ? 0 : $skills->altitude_email).', '.($skills->altitude_chat == 'na' ? 0 : $skills->altitude_chat).', '.($skills->social == 'na' ? 0 : $skills->social);
            $core_skills .= ', '.($skills->altitude_desktop == 'na' ? 0 : $skills->altitude_desktop).', '.($skills->altitude_ivr == 'na' ? 0 : $skills->altitude_ivr).', '.($skills->altitude_express_routing == 'na' ? 0 : $skills->altitude_express_routing).', '.($skills->altitude_integration == 'na' ? 0 : $skills->altitude_integration).', '.($skills->altitude_workflow == 'na' ? 0 : $skills->altitude_workflow);
            $core_skills .= ', '.($skills->uci_installation == 'na' ? 0 : $skills->uci_installation).', '.($skills->uci_patch == 'na' ? 0 : $skills->uci_patch);					
         ?>
        series: [
           {
			   showInLegend: false,
               name: 'Core Skills',
               data: [<?php echo $core_skills; ?>],
               pointPlacement: 'on'
            }
        ]

    });
});
   $(document).ready(function() {
      // Submit Form
       $('#submitForm').click(function() {
         $('#form-skills').submit();
       });
       
       $('#form-skills input').keydown(function(e) {
         if (e.keyCode == 13) {
            $('#form-skills').submit();
         }
      });
   });

   $('.history-date').click(function(e) {
      e.preventDefault();
      var icon = $('#i-'+$(this).attr('id')).attr('class');

      if(icon == 'icon-plus') {
         $('#i-'+$(this).attr('id')).attr('class', 'icon-minus');
      } else {
         $('#i-'+$(this).attr('id')).attr('class', 'icon-plus');
      }

      $('.'+$(this).attr('id')).toggle('slow');
   });

   function captureCurrentDiv() {
      html2canvas([document.getElementById('main-container')], {   
         onrendered: function(canvas)  
         {
            var img = canvas.toDataURL();
            $.post("<?php echo URL::to('/'); ?>/save.php", {data: img}, function (file) {               
               window.location.href =  "<?php echo URL::to('/'); ?>/download.php?path="+ file          
            }
            );   
         }
      });
   }
   //--></script>